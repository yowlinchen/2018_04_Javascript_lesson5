<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Photo Editor</title>
<script>
// 影像編輯功能
var ctx;
window.onload=function(){
	ctx=document.getElementById("cvs").getContext("2d"); // 取得 canvas 相對應的 context 物件
	// 載入圖片
	loadImage("landscape.jpg");
};
function loadImage(src){
	var img=new Image(); // <img/>
	img.src=src;
	img.onload=function(){
		// 確定圖檔載入完成之後，才畫進 canvas 裡面
		ctx.drawImage(this, 0, 0, ctx.canvas.width, ctx.canvas.height);
	};
}
function invert(){
	// 取得像素資料
	var pixels=ctx.getImageData(0, 0, 600, 450);
	// 以像素為單位處理資料
	for(var i=0;i<pixels.data.length;i+=4){
		pixels.data[i]=255-pixels.data[i]; // r
		pixels.data[i+1]=255-pixels.data[i+1]; // g
		pixels.data[i+2]=255-pixels.data[i+2]; // b
	}
	// 把處理完的像素資料放回 canvas 裡面
	ctx.putImageData(pixels, 0, 0);
}
</script>
</head>
<body>
	<div>
		<button onclick="invert();">Invert</button>
	</div>
	<canvas id="cvs" width="600" height="450"
		style="border:1px solid black"></canvas>
</body>
</html>